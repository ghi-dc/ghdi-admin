xquery version "3.1";

declare default element namespace "http://www.tei-c.org/ns/1.0";

declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare namespace json="http://www.json.org";


declare variable $collection external;
declare variable $id external;

(: Switch to JSON serialization :)
declare option output:method "json";
declare option output:media-type "text/javascript";

<json:value>
{
for $biblStruct in collection($collection)/biblStruct[@id=$id]  (: 0 or 1 :)
    return <data id="{$biblStruct/@id}" n="{$biblStruct/@n}">
    </data>
}
</json:value>
